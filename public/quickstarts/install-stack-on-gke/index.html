<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="apple-touch-icon" sizes="180x180" href="http://0.0.0.0:8000/images/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="http://0.0.0.0:8000/images/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="http://0.0.0.0:8000/images/favicon-16x16.png">
    <link rel="manifest" href="http://0.0.0.0:8000/images/site.webmanifest">
    <link rel="mask-icon" href="http://0.0.0.0:8000/images/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#ffffff">

    <meta name="description" content="Right now, Google Kubernetes Engine (GKE) is the most tested Kubernetes environment for Stack.">


    <title>
      How to install Stack on Google Kubernetes Engine — Presslabs Stack DOCS
    </title>
    <link href="http://0.0.0.0:8000/styles/styles.css" rel="stylesheet" type="text/css" />

    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
    <script
      src="https://code.jquery.com/jquery-3.4.1.slim.min.js"
      integrity="sha256-pasqAKBDmFT4eHoN2ndd6lN370kFiGUFyTiUHWhU7k8="
      crossorigin="anonymous"></script>
    <script type="text/javascript">
      var ALGOLIA_APP_ID = '0TS6NFHDBC';
      var ALGOLIA_SEARCH_KEY = 'b2efcfd6516eed7a2f19269f9cb13acb';
      var ALGOLIA_INDEX_NAME = 'Stack Docs';
      var HAS_VERSIONS = false;
    </script>

    
  </head>
  <body>
    

    <div class="progress-bar" role="progressbar" title="Progress bar"></div>

    <header class="bg-gray-100 border-b border-gray-200 nav" id="header-height" role="banner">
      <div class="container mx-auto">
        <div id="header" class="px-3 flex flex-col md:flex-row justify-between py-10">
  <div class="branding logo-container mb-5 md:mb-0 flex items-center">
    <a href="http://0.0.0.0:8000" class="logo-main" title="Presslabs">
      <svg xmlns="http://www.w3.org/2000/svg" class="block" width="150" height="42" fill-rule="evenodd">
        <title>Presslabs DOCS</title>
        <path fill="#0CB14B" class="symbol" d="M14.93,13.36H9.16a1.49,1.49,0,0,1,0-3h5.77a1.49,1.49,0,0,1,0,3Zm1.49,5.84a1.49,1.49,0,0,0-1.49-1.49H7.74a1.49,1.49,0,1,0,0,3h7.19A1.49,1.49,0,0,0,16.42,19.2ZM26.94,38.47a5.4,5.4,0,0,0,2.46-7.13L23.93,19.55a18,18,0,0,1-1.69-7.68V3.45A3.46,3.46,0,0,0,18.78,0H9.16a1.49,1.49,0,0,0,0,3h9.62a.46.46,0,0,1,.47.47v8.42a21.09,21.09,0,0,0,2,8.94L26.7,32.62v0a2.42,2.42,0,0,1-1.16,3.18A23.45,23.45,0,0,1,15,38.32a22.92,22.92,0,0,1-10.6-2.5,2.43,2.43,0,0,1-1.17-3.18l2-4.36A.47.47,0,0,1,5.62,28H16.5a1.49,1.49,0,1,0,0-3H5.62a3.46,3.46,0,0,0-3.07,1.89l-2,4.41A5.39,5.39,0,0,0,3,38.46,26,26,0,0,0,15,41.3,26.61,26.61,0,0,0,26.94,38.47Zm-.22-5.82Z" />
        <path fill="#283859" class="logotype" d="M103.7,4.93a1.6,1.6,0,0,0-1.52,1.63V25.25a1.57,1.57,0,1,0,3.13,0V6.49A1.56,1.56,0,0,0,103.7,4.93ZM58.62,11.3a12.06,12.06,0,0,0-2.42-.21,15.53,15.53,0,0,0-3.45.5,1.45,1.45,0,0,0-1.21,1.6V25.25a1.56,1.56,0,1,0,3.12,0V13.87a9.39,9.39,0,0,1,2.16-.27c.44,0,1.35.12,1.62.12a1.14,1.14,0,0,0,1.15-1.24A1.11,1.11,0,0,0,58.62,11.3ZM42.12,24.52A10.22,10.22,0,0,1,38.73,24V13.92a12,12,0,0,1,3.39-.44c3.42,0,3.74,2.63,3.74,5.34C45.86,21.74,45.63,24.52,42.12,24.52Zm.23-13.43a22.52,22.52,0,0,0-5.57.68,1.4,1.4,0,0,0-1.18,1.57V31.51a1.57,1.57,0,0,0,3.13,0V26.34a13,13,0,0,0,3.8.56c4.4,0,6.52-2.71,6.52-8.08C49.05,13.69,47.4,11.09,42.35,11.09ZM130,24.52a10.22,10.22,0,0,1-3.39-.51V14a10.89,10.89,0,0,1,3.39-.47c3.42,0,3.75,2.63,3.75,5.34C133.78,21.74,133.54,24.52,130,24.52Zm.62-13.43a13.18,13.18,0,0,0-4,.62V6.49a1.57,1.57,0,0,0-3.13,0v18.2a1.44,1.44,0,0,0,1.18,1.57,19.51,19.51,0,0,0,5.13.64c5.22,0,7.14-2.71,7.14-8.08C137,13.69,135.19,11.09,130.65,11.09ZM144.1,26.9a17.43,17.43,0,0,1-4.39-.56c-.59-.17-1-.47-1-1.15a1.06,1.06,0,0,1,1.15-1.12,37.79,37.79,0,0,0,3.87.5c2.42,0,3.21-.62,3.21-2,0-1.57-.76-2.16-3.45-2.54-3.21-.47-4.69-1.5-4.69-4.51,0-3.19,2.45-4.46,5.81-4.46a17.56,17.56,0,0,1,4,.5,1.06,1.06,0,0,1,1,1.13,1,1,0,0,1-1.12,1.12c-.56,0-2.25-.42-3.6-.42-2.48,0-3.1.8-3.1,1.95,0,1.39.68,1.89,3.33,2.3,3.4.53,4.87,1.39,4.87,4.54C150,25.64,148,26.9,144.1,26.9Zm-26.87-7.52H115.6c-4.16,0-4.83,1.33-4.83,2.83s.56,2.42,3.21,2.42a15.28,15.28,0,0,0,3.25-.44Zm3.06,5.28a1.4,1.4,0,0,1-1.18,1.57,24.41,24.41,0,0,1-5.31.67c-4.66,0-6.13-1.47-6.13-4.57,0-2.77,1.77-4.84,7.64-4.84h1.92V16.14c0-1.92-.92-2.63-3.31-2.63a39,39,0,0,0-3.92.41,1,1,0,0,1-1.12-1.14,1,1,0,0,1,.94-1.13,22.61,22.61,0,0,1,4.84-.56c4.07,0,5.63,1.36,5.63,4.78ZM93.74,26.9a17.43,17.43,0,0,1-4.39-.56,1.11,1.11,0,0,1-1-1.15,1.06,1.06,0,0,1,1.15-1.12,37.9,37.9,0,0,0,3.86.5c2.42,0,3.21-.62,3.21-2,0-1.57-.76-2.16-3.45-2.54-3.21-.47-4.69-1.5-4.69-4.51,0-3.19,2.45-4.46,5.82-4.46a17.64,17.64,0,0,1,4,.5,1.06,1.06,0,0,1,.94,1.13,1,1,0,0,1-1.12,1.12c-.56,0-2.24-.42-3.6-.42-2.48,0-3.1.8-3.1,1.95,0,1.39.68,1.89,3.34,2.3,3.39.53,4.86,1.39,4.86,4.54C99.64,25.64,97.67,26.9,93.74,26.9Zm-13,0a17.6,17.6,0,0,1-4.4-.56,1.11,1.11,0,0,1-1-1.15,1.06,1.06,0,0,1,1.15-1.12,37.9,37.9,0,0,0,3.86.5c2.42,0,3.22-.62,3.22-2,0-1.57-.77-2.16-3.46-2.54-3.21-.47-4.69-1.5-4.69-4.51,0-3.19,2.45-4.46,5.82-4.46a17.64,17.64,0,0,1,4,.5,1.06,1.06,0,0,1,.94,1.13,1,1,0,0,1-1.12,1.12c-.56,0-2.24-.42-3.6-.42-2.48,0-3.1.8-3.1,1.95,0,1.39.68,1.89,3.34,2.3,3.39.53,4.86,1.39,4.86,4.54C86.6,25.64,84.63,26.9,80.71,26.9Zm-9.92-9.23c-.09-2.24-.38-4.33-3.45-4.33s-3.42,2.12-3.48,4.33Zm1.33,1.95H63.89c0,2.62.56,4.87,4.25,4.87a35.94,35.94,0,0,0,3.74-.42A1.07,1.07,0,0,1,73,25.22a1.1,1.1,0,0,1-1,1.18,23.49,23.49,0,0,1-5.1.5c-4.84,0-6.17-2.8-6.17-8.08,0-5,1.92-7.73,6.64-7.73,4.57,0,6.22,2.57,6.22,7.08C73.65,19.06,73.24,19.62,72.12,19.62Z" />
      </svg>
    </a>
    <a href="http://0.0.0.0:8000" class="ml-3 mb-1 text-2xl font-light text-gray-700 hover:text-blue-700" title="Presslabs Stack">
      <span class="logo-domain">
        <span class="stack-domain">DOCS</span>
      </span>
    </a>
  </div>

  <div class="flex flex-grow-1 md:flex-grow-0 md:ml-5 items-center">
    <div class="w-full md:mr-5">
      <input type="search" role="search" class="form-input w-full text-gray-800" id="algolia-doc-search" placeholder="Search docs" aria-label="Search docs" autocomplete="off">
    </div>

    <div class="hidden md:block">
      <a class="bg-green-600 hover:bg-green-700 transition-bg text-white font-bold py-3 px-4 rounded text-sm whitespace-no-wrap text-shadow-sm" href="https://www.presslabs.com/" tabindex="0">Discover Presslabs</a>
    </div>
  </div>
</div>

      </div>
    </header>

    <main class="container mx-auto px-3 flex mt-3" role="main">
      <div class="hidden md:block md:w-1/4">
        <div id="sidebar" class="pr-10">

  

  
<h3 id="nav-title" class="hidden">Navigation</h3>
<div class="side-nav pt-4" role="navigation" aria-labelledby="nav-title">
  <ul class="text-sm">
    <li class="list-item">
      <a
        href="/about-stack"
        class="block leading-loose text-gray-700 hover:text-blue-700 js-toggle"
      >
        About Stack
      </a>
    </li>
    <li class="has-children">
      <a
        href="#"
        class="block leading-loose text-gray-700 hover:text-blue-700 js-toggle font-bold"
      >
        Quickstart
      </a>
      <ul class="ml-2 block my-1">
    <li class="list-item">
      <a
        href="/quickstarts/install-stack-on-gke/"
        class="block leading-loose text-gray-700 hover:text-blue-700 js-toggle text-blue-600"
      >
        Install on GKE
      </a>
    </li>
    <li class="list-item">
      <a
        href="/quickstarts/install-stack-on-minikube/"
        class="block leading-loose text-gray-700 hover:text-blue-700 js-toggle"
      >
        Install on Minikube
      </a>
    </li>
      </ul>
    </li>
    <li class="has-children">
      <a
        href="#"
        class="block leading-loose text-gray-700 hover:text-blue-700 js-toggle font-bold"
      >
        How-to guides
      </a>
      <ul class="ml-2 hidden my-1">
    <li class="has-children">
      <a
        href="#"
        class="block leading-loose text-gray-700 hover:text-blue-700 js-toggle font-bold"
      >
        Development
      </a>
      <ul class="ml-2 hidden my-1">
    <li class="list-item">
      <a
        href="/how-to/development/local-development/"
        class="block leading-loose text-gray-700 hover:text-blue-700 js-toggle"
      >
        Local development
      </a>
    </li>
    <li class="list-item">
      <a
        href="/how-to/development/local-development-with-bedrock/"
        class="block leading-loose text-gray-700 hover:text-blue-700 js-toggle"
      >
        Using Bedrock
      </a>
    </li>
      </ul>
    </li>
    <li class="list-item">
      <a
        href="/how-to/deploy-wordpress-on-stack/"
        class="block leading-loose text-gray-700 hover:text-blue-700 js-toggle"
      >
        Deploy to Stack
      </a>
    </li>
    <li class="list-item">
      <a
        href="/how-to/import-site/"
        class="block leading-loose text-gray-700 hover:text-blue-700 js-toggle"
      >
        Import data
      </a>
    </li>
      </ul>
    </li>
    <li class="has-children">
      <a
        href="#"
        class="block leading-loose text-gray-700 hover:text-blue-700 js-toggle font-bold"
      >
        Concepts
      </a>
      <ul class="ml-2 hidden my-1">
    <li class="list-item">
      <a
        href="/concepts/running-wordpress-on-kubernetes/"
        class="block leading-loose text-gray-700 hover:text-blue-700 js-toggle"
      >
        Running WordPress on Kubernetes
      </a>
    </li>
      </ul>
    </li>
    <li class="has-children">
      <a
        href="#"
        class="block leading-loose text-gray-700 hover:text-blue-700 js-toggle font-bold"
      >
        References
      </a>
      <ul class="ml-2 hidden my-1">
    <li class="list-item">
      <a
        href="/reference/wordpress-site-helm-chart-values/"
        class="block leading-loose text-gray-700 hover:text-blue-700 js-toggle"
      >
        Helm chart values
      </a>
    </li>
    <li class="list-item">
      <a
        href="/reference/runtime-environment/"
        class="block leading-loose text-gray-700 hover:text-blue-700 js-toggle"
      >
        Runtime environment
      </a>
    </li>
      </ul>
    </li>
    <li class="list-item">
      <a
        href="/contributing"
        class="block leading-loose text-gray-700 hover:text-blue-700 js-toggle"
      >
        Contributing
      </a>
    </li>
  </ul>
</div>




</div>

      </div>
      <div class="w-full md:w-3/4">
        <div class="content-wrapper">


<div class="flex">
  <div class="lg:w-3/4 w-full">
    




<ul class="flex flex-wrap text-sm font-light py-5">
  <li>
    <a href="http://0.0.0.0:8000" class="text-gray-600 hover:text-blue-600" title="Home"><i class="ico ico-home"></i><span class="hidden">Home</span></a>
  </li>
  
    
      
    
    <li>
      <span class="text-gray-300 px-3">/</span> <a href="http://0.0.0.0:8000quickstarts/" class="text-gray-600 hover:text-blue-600">Quickstart</a>
    </li>
  
    
      
    
    <li>
      <span class="text-gray-300 px-3">/</span> <a href="http://0.0.0.0:8000quickstarts/install-stack-on-gke/" class="text-gray-600 hover:text-blue-600">How to install Stack on Google Kubernetes Engine</a>
    </li>
  
</ul>


<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
        "@type": "ListItem",
        "position":  0 ,
        "item": {
          
          "@id": "\/quickstarts",
          "name": "Quickstart"
        }
    },{
        "@type": "ListItem",
        "position":  1 ,
        "item": {
          
          "@id": "\/quickstarts\/install-stack-on-gke",
          "name": "How to install Stack on Google Kubernetes Engine"
        }
    }]
}
</script>









<div id="install-stack-on-gke">
  <div class="mb-10">
    <h1 class="font-normal leading-tight md:leading-loose text-2xl md:text-3xl text-blue-900">How to install Stack on Google Kubernetes Engine</h1>
    <p class="font-light text-xl text-gray-700">Right now, Google Kubernetes Engine (GKE) is the most tested Kubernetes environment for Stack.</p>
  </div>
  <div class="prose" id="prose"><h2 id="cluster-description">Cluster description</h2>
<blockquote>
<h6 id="warning">WARNING</h6>
<p>Keep in mind that for now, Kubernetes 1.13.6 and 1.14.2 are not supported because of 




<a href="https://github.com/presslabs/stack/issues/23">https://github.com/presslabs/stack/issues/23</a>
.</p>
</blockquote>
<p>If you want to move quickly, you can use the predefined terraform scripts from 




<a href="https://github.com/presslabs/stack/tree/master/terraform/examples/gke">terraform</a>
.</p>
<p>These scripts allow you to create a new cluster with 4 node pools, pre-configured with the labels and taints:</p>
<ul>
<li><code>system</code>, used by the control plane to host all operators pods. Those nodes don't need heavy resources.</li>
<li><code>database</code>, MySQL related nodes. You can tweak the MySQL performance by using nodes with faster IO and maybe bigger memory for the query cache, depending on the use-case.</li>
<li><code>wordpress</code> is used to host pods that run the PHP code with helper containers for serving media files via buckets.</li>
<li><code>wordpress-preemptible</code> is the same as the <code>wordpress</code> pool, but it has the <code>cloud.google.com/gke-preemptible</code> taint. Because of that, you can use preemptible machines for development sites, lowering the entire costs of the cluster.</li>
</ul>
<p>In order to continue with terraform, you'll need some prerequisites:</p>
<ul>
<li><code>terraform &gt;= v0.12.1</code></li>
<li><code>gcloud</code></li>
<li><code>kubectl</code></li>
</ul>
<p>Moving forward, let's clone the repository:</p>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">git clone git@github.com:presslabs/stack.git
<span class="nb">cd</span> stack
</code></pre></div><p>In <code>stack/</code>, you'll find a directory called <code>terraform</code> which contains some terraform modules and some examples. It's highly recommended to check the modules yourself, but here is a summary:</p>
<ul>
<li>in order to create a cluster, you'll need to specify a name, region, and at least a zone.</li>
<li>the initial node count is going to be 1 and the cluster will have the <code>Horizontal Pod Autoscaler</code> add-on enabled</li>
</ul>
<h3 id="node-pools-details">Node pools details</h3>
<h4 id="system-node-pool">system node pool</h4>
<p>The <code>system</code> node pool is going to have the initial node count set to 1, but it has autoscaling active, with a minimum node count of 1 to a maxim of 3 nodes. It spawns nodes with 50Gb storage and &ldquo;COS&rdquo; images (Container-Optimized OS from Google). Those nodes can be configured as preemptible, if the <code>preemptible</code> variable is set to <code>true</code>. As labels, it sets only one called <code>node-role.kubernetes.io/presslabs-sys</code>. One interesting part about this node pool is that it has a taint called <code>CriticalAddonsOnly</code>. You can read more about taints and toleration 




<a href="https://cloud.google.com/kubernetes-engine/docs/how-to/node-taints">here</a>
. It's advised to have non-preemptible machines for this node-pool in production, but it doesn't require having resource heavy machines.</p>
<h4 id="database-node-pool">database node pool</h4>
<p>Next one is the <code>database</code> node pool. Is similar to the <code>system</code> node pool, the only differences are in initial node count, which is 0, and labels which are <code>node-role.kubernetes.io/database</code>, <code>node-role.kubernetes.io/mysql</code> and <code>node-role.kubernetes.io/memcached</code>. As you can see, the Memcached instance is close to the database, but this can be updated.</p>
<h4 id="wordpress-node-pool">wordpress node pool</h4>
<p>This node pool is used to run the WordPress. You may want to have CPU intensive machines here since php-fpm doesn't have an async way to run your code and its processing one request per worker. The recommended amount of workers per CPU core is 8, but you can play with it, depending on your use-case.</p>
<h4 id="wordpress-preemtible-node-pool">wordpress-preemtible node pool</h4>
<p>In order to cut your costs, you may want to create sites on preemptible machines. They are short-lived instances, 80% cheaper than normal VMs, but they don't have a guaranteed lifespan (Google may need them if their workload is high or if they are up for more than 24h). This node pool is suitable for development or low-traffic instances.</p>
<h2 id="create-a-new-cluster">Create a new cluster</h2>
<p>In order to create a new cluster, first, you'll need to authorize yourself, via gcloud cli.</p>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">gcloud auth login
gcloud auth application-default login
</code></pre></div><p>We'll then need to initialize terraform's modules and install <code>google-beta</code> plugin.</p>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell"><span class="nb">cd</span> terraform/examples/gke
terraform init
</code></pre></div><p>Next, create a new values file. Let's call it <code>cluster.tfvars</code>.</p>
<div class="highlight"><pre class="chroma"><code class="language-fallback" data-lang="fallback"># cluster.tfvars

project = &#34;my-project-name&#34;
cluster_name = &#34;presslabs-stack-1&#34;
preemptible = true
system_node_type = &#34;n1-standard-4&#34;
database_node_type = &#34;n1-standard-4&#34;
wordpress_node_type = &#34;n1-standard-4&#34;
zones = [&#34;europe-west3-a&#34;]
</code></pre></div><p>You can see a list with all variables you can update in 




<a href="https://github.com/presslabs/stack/blob/master/terraform/examples/gke/main.tf">main.tf</a>
</p>
<p>Next, just apply the configuration you set:</p>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">terraform apply -var-file<span class="o">=</span><span class="s2">&#34;cluster.tfvars&#34;</span>
</code></pre></div><p>To be able to interact with kubernetes, you need to get the permission:</p>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">gcloud beta container clusters get-credentials presslabs-stack-1 --region europe-west3 --project my-project-name
</code></pre></div><p>Now that the cluster is up and running, you'll need to install helm tiller and the Presslabs Stack. For that, Stack offers some bash scripts that are located under the 




<a href="https://github.com/presslabs/stack/tree/master/demo">demo</a>
 directory, <code>01-install-helm.sh</code> and <code>02-install-presslabs-stack.sh</code>.</p>
<h2 id="install-helm-tiller">Install helm tiller</h2>
<p>The 




<a href="https://github.com/presslabs/stack/blob/master/demo/01-install-helm.sh">01-install-helm.sh</a>
 bash script creates a <code>tiller</code> service account, it binds the <code>cluster-admin</code> role to it and is initialising the tiller, it contains the following commands:</p>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">kubectl --namespace kube-system create sa tiller

kubectl create clusterrolebinding tiller <span class="se">\
</span><span class="se"></span>    --clusterrole cluster-admin <span class="se">\
</span><span class="se"></span>    --serviceaccount<span class="o">=</span>kube-system:tiller

helm init --service-account tiller <span class="se">\
</span><span class="se"></span>    --history-max <span class="m">10</span> <span class="se">\
</span><span class="se"></span>    --override <span class="s1">&#39;spec.template.spec.containers[0].command&#39;</span><span class="o">=</span><span class="s1">&#39;{/tiller,--storage=secret}&#39;</span> <span class="se">\
</span><span class="se"></span>    --override <span class="s1">&#39;spec.template.spec.tolerations[0].key&#39;</span><span class="o">=</span><span class="s1">&#39;CriticalAddonsOnly&#39;</span> <span class="se">\
</span><span class="se"></span>    --override <span class="s1">&#39;spec.template.spec.tolerations[0].operator&#39;</span><span class="o">=</span><span class="s1">&#39;Exists&#39;</span> <span class="se">\
</span><span class="se"></span>    --wait
</code></pre></div><h2 id="install-the-presslabs-stack">Install the Presslabs Stack</h2>
<p>The 




<a href="https://github.com/presslabs/stack/blob/master/demo/02-install-presslabs-stack.sh">02-install-presslabs-stack.sh</a>
 bash script is actually going to install the Stack, via <code>helm</code>. We'll take all the commands from this script one by one.</p>
<p>First, we'll need a <code>presslabs-stack</code> namespace:</p>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">kubectl create ns presslabs-stack
</code></pre></div><p>For that namespace, we'll need to disable validation, in order to allow cert-manager to do its job:</p>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">kubectl label namespace presslabs-stack certmanager.io/disable-validation<span class="o">=</span><span class="nb">true</span>
</code></pre></div><p>Next, add the Presslabs's charts repository to your helm sources:</p>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">helm repo add presslabs https://presslabs.github.io/charts
helm repo update
</code></pre></div><p>Also before before installing the stack using helm we need to install the CRDs that are used by this deployment:</p>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">kubectl apply -f https://raw.githubusercontent.com/presslabs/stack/master/deploy/manifests/00-crds.yaml
</code></pre></div><p>In the end, you can just install <code>presslabs/stack</code> chart with some preset values from 




<a href="https://github.com/presslabs/stack/blob/master/presets/gke.yaml">gke.yaml</a>
.</p>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">helm upgrade -i stack presslabs/stack --namespace presslabs-stack <span class="se">\
</span><span class="se"></span>    -f <span class="s2">&#34;https://raw.githubusercontent.com/presslabs/stack/master/presets/gke.yaml&#34;</span>
</code></pre></div><p>The preset values will request basic resources for each component: <code>256Mi</code> RAM and <code>100m</code> CPU.</p>
<p>That's pretty much it! You have Stack up and running on your cluster!</p>
<h2 id="enable-lets-encrypt">Enable Let's Encrypt</h2>
<p>By default, Stack comes with self-signed issuer enabled. If you want to configure letsencrypt issues, you'll need to run the following command</p>
<div class="highlight"><pre class="chroma"><code class="language-shell" data-lang="shell">helm upgrade -i stack presslabs/stack <span class="se">\
</span><span class="se"></span>	--namespace presslabs-stack <span class="se">\
</span><span class="se"></span>	-f <span class="s2">&#34;https://raw.githubusercontent.com/presslabs/stack/master/presets/gke.yaml&#34;</span> <span class="se">\
</span><span class="se"></span>	--set <span class="s1">&#39;letsencrypt.enabled=true,letsencrypt.email=&lt;youremail&gt;&#39;</span>
</code></pre></div><h2 id="video-tutorial-how-to-install-stack-on-gke">VIDEO Tutorial: How to install Stack on GKE</h2>
<!-- raw HTML omitted -->
</div>
</div>

    
      

<div class="mt-24">
  <h2 class="text-3xl mb-5 font-light text-gray-900">See Also</h2>
  <div class="grid grid-columns-1 md:grid-columns-2 grid-gap-2 md:grid-gap-8">
    
    <div class="group rounded overflow-hidden shadow-lg hover:bg-blue-500 p-5 relative pb-16">
      <h3 class="font-normal text-gray-900 text-xl mb-5 group-hover:text-white">How to install Stack on Minikube</h3>
      <p class="group-hover:text-white font-light text-gray-700">Installing Stack on Minikube is no different then installing it on another Kubernetes cluster.</p>
      <div class="absolute bottom-0 pb-5">
        <a href="/quickstarts/install-stack-on-minikube/" class="flex items-center text-blue-600 group-hover:text-white">
          <span>Read More</span> <i class="ml-1 ico ico-arrow-e ico-bold text-xl"></i>
        </a>
      </div>
    </div>
    
  </div>
</div>


    
  </div>
  <div class="hidden lg:block lg:w-1/4 pl-10">

    <div class="hidden md:block py-4 sticky top-0">
  
  

  
  <div>
    <h3 class="text-xs uppercase tracking-wider font-bold text-gray-600">What's on this Page</h3>
    <ul class="text-xs font-light py-5">
      
        
        
        
        
        <li class="mb-2">
          <a href="#cluster-description" class="text-gray-600 hover:text-blue-600">Cluster description</a>
        </li>
      
        
        
        
        
        <li class="mb-2">
          <a href="#create-a-new-cluster" class="text-gray-600 hover:text-blue-600">Create a new cluster</a>
        </li>
      
        
        
        
        
        <li class="mb-2">
          <a href="#install-helm-tiller" class="text-gray-600 hover:text-blue-600">Install helm tiller</a>
        </li>
      
        
        
        
        
        <li class="mb-2">
          <a href="#install-the-presslabs-stack" class="text-gray-600 hover:text-blue-600">Install the Presslabs Stack</a>
        </li>
      
        
        
        
        
        <li class="mb-2">
          <a href="#enable-lets-encrypt" class="text-gray-600 hover:text-blue-600">Enable Let's Encrypt</a>
        </li>
      
        
        
        
        
        <li class="mb-2">
          <a href="#video-tutorial-how-to-install-stack-on-gke" class="text-gray-600 hover:text-blue-600">VIDEO Tutorial: How to install Stack on GKE</a>
        </li>
      
    </ul>
  </div>
  

</div>

    
  <div date-pref class="flex justify-between text-sm" role="group">
    
    
      <a href="http://0.0.0.0:8000/quickstarts/install-stack-on-minikube/" class="flex items-center text-blue-600 hover:text-blue-700" title="How to install Stack on Minikube">
        Next <i class="ico ico-arrow-e ml-2"></i>
      </a>
    
  </div>


    <a class="text-blue-600 hover:text-blue-700 text-sm sticky" style="top: calc(100vh - 50px);" tabindex="0" href="#">Back to top <i class="ico ico-arrow-n"></i></a>


  </div>
</div>

        </div>
      </div>
    </main>

    <footer id="footer-height" class="site-footer px-10 font-light text-sm bg-gray-100 border-t border-gray-200 mt-24" role="contentinfo">
      <div class="container mx-auto py-16">
        <div class="footer-widgets">
          <div class="site-social">
            <h2 class="mt-0 mb-5 text-2xl font-light text-gray-700">Let’s talk</h2>
            <a class="bg-green-600 hover:bg-green-700 transition-bg text-white font-bold py-2 px-4 rounded text-shadow-sm" href="https://www.presslabs.com/contact/">Reach out today</a>

            <h2 class="md:mt-24 text-2xl font-light text-gray-700">Follow us</h2>
            <ul class="socials flex mb-5">
              <li class="mr-5 text-xl"><a class="text-blue-600 hover:text-blue-700" href="https://twitter.com/presslabs/" title="Follow us on Twitter"><i class="ico ico-twitter"> <span class="hidden">Twitter</span></i></a></li>
              <li class="mr-5 text-xl"><a class="text-blue-600 hover:text-blue-700" href="https://github.com/presslabs/" title="Follow us on Github"><i class="ico ico-github"> <span class="hidden">Github</span></i></a></li>
              <li class="mr-5 text-xl"><a class="text-blue-600 hover:text-blue-700" href="https://kubernetes.slack.com/messages/CEKQXFR0E/" title="Follow us on Slack"><i class="ico ico-slack"> <span class="hidden">Slack</span></i></a></li>
              <li class="mr-5 text-xl"><a class="text-blue-600 hover:text-blue-700" href="https://www.youtube.com/presslabs/" title="Follow us on YouTube"><i class="ico ico-youtube"> <span class="hidden">YouTube</span></i></a></li>
              <li class="mr-5 text-xl"><a class="text-blue-600 hover:text-blue-700" href="https://www.linkedin.com/company/presslabs/" title="Follow us on Linkedin"><i class="ico ico-linkedin"> <span class="hidden">LinkedIn</span></i></a></li>
              <li class="mr-5 text-xl"><a class="text-blue-600 hover:text-blue-700" href="https://www.facebook.com/presslabs/" title="Follow us on Facebook"><i class="ico ico-facebook"> <span class="hidden">Facebook</span></i></a></li>
            </ul>

            <a class="text-blue-600 hover:text-blue-700 text-lg" href="tel:+18447737752" class="flex items-center my-5" title="Phone"><i class="ico ico-phone text-base mr-2"></i> +1-844-7737752</a>
          </div>
          <div class="site-info text-gray-600 text-sm">
            <p class="location"> Engineered in Europe, deployed worldwide.</p>
            <p>Copyright &copy; 2011 &mdash; 2020 Presslabs.</p>
            
          </div>
          <div id="nav_menu-3">
            <h4 class="text-xs uppercase tracking-wider font-bold text-gray-700 mb-5">Presslabs</h4>
            <ul id="menu-footer-presslabs">
              <li class="mb-2"><a class="text-gray-800 hover:text-blue-600" href="https://www.presslabs.com/about/">About us</a></li>
              <li class="mb-2"><a class="text-gray-800 hover:text-blue-600" href="https://www.presslabs.com/blog/">Blog</a></li>
              <li class="mb-2"><a class="text-gray-800 hover:text-blue-600" href="https://www.presslabs.com/press/">Press</a></li>
              <li class="mb-2"><a class="text-gray-800 hover:text-blue-600" href="https://www.presslabs.com/jobs/">Jobs</a></li>
              <li class="mb-2"><a class="text-gray-800 hover:text-blue-600" href="https://www.presslabs.com/contact/">Contact</a></li>
            </ul>
          </div>
          <div id="nav_menu-4">
            <h4 class="text-xs uppercase tracking-wider font-bold text-gray-700 mb-5">WordPress Hosting</h4>
            <ul id="menu-footer-wordpress-hosting">
              <li class="mb-2"><a class="text-gray-800 hover:text-blue-600" href="https://www.presslabs.com/publisher/">Publishers</a></li>
              <li class="mb-2"><a class="text-gray-800 hover:text-blue-600" href="https://www.presslabs.com/agencies/">Agencies</a></li>
              <li class="mb-2"><a class="text-gray-800 hover:text-blue-600" href="https://www.presslabs.com/enterprise/">Enterprise</a></li>
              <li class="mb-2"><a class="text-gray-800 hover:text-blue-600" href="https://www.presslabs.com/specifications/">Specifications</a></li>
              <li class="mb-2"><a class="text-gray-800 hover:text-blue-600" href="https://www.presslabs.com/clients/">Clients</a></li>
              <li class="mb-2"><a class="text-gray-800 hover:text-blue-600" href="https://www.presslabs.com/pricing/">Pricing</a></li>
              <li class="mb-2"><a class="text-gray-800 hover:text-blue-600" href="https://www.presslabs.com/datacenters/">Datacenters</a></li>
            </ul>
          </div>
          <div id="nav_menu-7" class="widget widget_nav_menu">
            <h4 class="text-xs uppercase tracking-wider font-bold text-gray-700 mb-5">Cloud-Native Solutions</h4>
            <ul id="menu-footer-cloud-menu">
              <li class="mb-2"><a class="text-gray-800 hover:text-blue-600" href="https://www.presslabs.com/dashboard/">Dashboard</a></li>
              <li class="mb-2"><a class="text-gray-800 hover:text-blue-600" href="https://www.presslabs.com/stack/">Stack</a></li>
            </ul>
          </div>
          <div id="nav_menu-5">
            <h4 class="text-xs uppercase tracking-wider font-bold text-gray-700 mb-5">Documentation</h4>
            <ul id="menu-footer-documentation">
              <li class="mb-2"><a class="text-gray-800 hover:text-blue-600" href="https://www.presslabs.com/docs/getting-started/setting-up-a-site/">Getting started</a></li>
              <li class="mb-2"><a class="text-gray-800 hover:text-blue-600" href="https://www.presslabs.com/docs/getting-started/support/">Support</a></li>
              <li class="mb-2"><a class="text-gray-800 hover:text-blue-600" href="https://www.presslabs.com/docs/getting-started/setting-up-a-site/#migrating-an-existing-site">Migration</a></li>
              <li class="mb-2"><a class="text-gray-800 hover:text-blue-600" href="https://www.presslabs.com/docs/development/presslabs-development-guidelines/">Development</a></li>
              <li class="mb-2"><a class="text-gray-800 hover:text-blue-600" href="https://www.presslabs.com/docs/categories/platform-specifications/">Platform specifications</a></li>
              <li class="mb-2"><a class="text-gray-800 hover:text-blue-600" href="https://www.presslabs.com/docs/platform-specifications/backup-policy/">Backups</a></li>
              <li class="mb-2"><a class="text-gray-800 hover:text-blue-600" href="https://www.presslabs.com/docs/getting-started/payments/">Payments</a></li>
            </ul>
          </div>
          <div id="nav_menu-6">
            <h4 class="text-xs uppercase tracking-wider font-bold text-gray-700 mb-5">Legal</h4>
            <ul id="menu-footer-legal">
              <li class="mb-2"><a class="text-gray-800 hover:text-blue-600" href="https://www.presslabs.com/legal/terms-and-conditions/">Terms and conditions</a></li>
              <li class="mb-2"><a class="text-gray-800 hover:text-blue-600" href="https://www.presslabs.com/legal/privacy-policy/">Privacy policy</a></li>
              <li class="mb-2"><a class="text-gray-800 hover:text-blue-600" href="https://www.presslabs.com/legal/abuse-policy/">Abuse policy</a></li>
              <li class="mb-2"><a class="text-gray-800 hover:text-blue-600" href="https://www.presslabs.com/legal/data-protection/">Data protection</a></li>
              <li class="mb-2"><a class="text-gray-800 hover:text-blue-600" href="https://www.presslabs.com/legal/returns-and-cancellation-policy/">Returns and cancellation</a></li>
              <li class="mb-2"><a class="text-gray-800 hover:text-blue-600" href="http://www.anpc.gov.ro/">Alternative dispute resolution / ANPC</a></li>
            </ul>
          </div>
        </div> 

      </div>
    </footer>

    
    
    
    
    
    
    

    
    <script type="text/javascript" src="http://0.0.0.0:8000/js/scripts.min.js"></script>
  </body>
</html>

